# シェルの設定

この記事では、a-Shellのシェルの設定に焦点を当てています。a-Shellのデフォルト（かつ唯一の）シェルは`bash`ではなく`dash`です。a-Shellのデフォルトシェル（アプリを起動したときに表示されるシェル）と`dash`（スクリプトを実行するシェル）には違いがあり、`dash`を実行して`dash`がどのように動作するかを確認できます。

### なぜdashを使うのか？

a-Shellにシェルを含めるのは難しいタスクです。さまざまなシェルの中から選択できる中で、`dash`はよりシンプルで軽量なものです。

`bash`は一般的に使用されていますが、GPLの下にあるため、a-Shellには含めることができません。`zsh`ははるかに複雑ですが、将来的に追加される予定です。成功裏に含めることができれば、ユーザーエクスペリエンスが大幅に向上するでしょう。

### スクリプトの実行

`dash`はPOSIX互換なので、標準のシェルスクリプトを実行できます。ただし、1つ注意するべき点があります。多くのスクリプトは実際には`bash`に依存しています。一部のスクリプトの最初の行が `/usr/bin/env sh` ではなく `/usr/bin/env bash` になっており、これにより、`bash`を含むオリジナルの `neofetch` など、動作しなくなります。`bash`を`dash`または`sh`に変更して試すこともできますが、`bash`の機能を使用するすべてのスクリプトはどちらにせよ動作しません。これを回避するためには、スクリプトを書き直す必要があります。将来的に`zsh`が追加されると、これが改善される可能性があります。

### .profileと.bashrc

`~/Documents/.profile` および `~/Documents/.bashrc` は、シェルの起動時に何を行うかを定義するために提供されています。新しいa-Shellウィンドウが開始されると、`~/Documents/.profile` および `~/Documents/.bashrc` の両方が読み込まれ、`dash`が起動すると、`~/Documents/.profile` のみが読み込まれます。それがそれらの間の違いです。これらのスクリプトには多くのことを追加できます：環境変数、エイリアス、プロンプトなど。たとえば、`.profile` にエイリアスを追加できます：

```bash
alias md='mkdir'
```

### プロンプトの定義

Zshの愛用者は、端末のカラフルなプロンプトに夢中になるかもしれません。嬉しいことに、a-Shellでもプロンプトの外観を変更できますが、これは `zsh` や `fish` で "テーマを設定" するのと同じくらい簡単ではありません。

プロンプトの外観は変数 `$PS1` によって定義されます。たとえば、好きな文字に設定できます：

```bash
$ export PS1='>'
>
```

時々、プロンプトを通じて現在のパスや他の有用な情報を知りたいことがあります。以下は使用できるいくつかのパラメータです：

* `\d`：現在の日付
* `\u`： `$USERNAME` に格納されたユーザー名（デフォルトは `mobile`）
* `\s`：シェルの名前
* `$`：行の終わり、新しい行を開始するために使用
* `\t`：現在の時刻、hh:mm:ss および24時間形式で表示
* `\T`：現在の時刻、hh:mm:ss および12時間形式で表示
* `\@`：現在の時刻、hh:mm および12時間形式で表示
* `\A`：現在の時刻、hh:mm および24時間形式で表示
* `\v`：a-Shellの現在のバージョン
* `\V`：a-Shellの現在のバージョンとビルド番号
* `\w`：現在の完全なパス
* `\W`：現在の作業ディレクトリ、完全なパスではない
* `\!` および `\#`：コマンドの番号、現在は正しく動作していない
* `\$`：アカウントが `root` であるかどうかを判別し、はいの場合は `#`、いいえの場合は `$`（ジェイルブレイクしていても `yes` にはなりません）
* `\\`：バックスラッシュ
* `\[` および `\]`：非印刷文字の場所の開始または停止、色の変更などの制御文字を定義するために使用されます

ANSIの制御文字を使用して色や他のスタイルを定義できます。以下は例です：

```bash
$ export PS1='\[\033[034m\]\w\[\033[0m\]\$'
```

このコマンドを `.bashrc` に追加して、a-Shellが起動するたびにロードされるようにします。

さて、このような虹色のスタイルのプロンプトをどのようにして取得するかを推測してみてください。アレイにはNerdフォントが必要です。

<figure><img src="../.gitbook/assets/34977EE6-3A93-4E5E-A2F4-108E57599302.jpeg" alt=""><figcaption><p>虹色のスタイルのプロンプト</p></figcaption></figure>

注意：この機能はa-Shellのデフォルトシェル（a-Shellが起動したときのシェル）にのみ対応しており、`dash`には対応していません。`dash`を実行すると、一連の奇妙なコードしか取得できません。

変数に `` `pwd` `` のようなコマンドを追加したいかもしれません。ただし、これはa-Shellでは機能しないため、プロンプトで `git status` を表示することはできません。

### lsの色の定義

{% hint style="info" %}
この部分は計画中です。
{% endhint %}

